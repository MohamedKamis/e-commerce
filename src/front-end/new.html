<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bait Gabr - متجر الإلكترونيات</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Almarai', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .arabic-text {
            font-family: 'Almarai', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #4a5568 100%);
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, #d4af37 0%, #ffd700 50%, #daa520 100%);
        }
        
        .product-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            border-color: #d4af37;
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.15);
        }
        
        .category-btn {
            transition: all 0.3s ease;
        }
        
        .category-btn:hover {
            background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
            color: #1a202c;
            transform: scale(1.05);
        }
        
        .cart-item {
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .price-range {
            accent-color: #d4af37;
        }
        
        .social-icon {
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
        }
        
        .search-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
        }
        
        .nav-item {
            position: relative;
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: 0;
            width: 0;
            height: 2px;
            background: #d4af37;
            transition: width 0.3s ease;
        }
        
        .nav-item:hover::after {
            width: 100%;
        }
        
        .hero-section {
            background: linear-gradient(135deg, rgba(26, 32, 44, 0.9) 0%, rgba(45, 55, 72, 0.8) 100%),
                        url('https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/7b1b8a8b-61b7-4f10-b167-c0a11161e93d.png') center/cover;
        }
        
        .discount-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #d4af37;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .rtl-support {
            direction: rtl;
            text-align: right;
        }
        
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
    </style>
</head>
<body class="rtl-support">
    <!-- Header Section -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- Cart and User Info -->
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="flex items-center space-x-2 bg-white/20 px-3 py-1 rounded-full">
                        <div class="w-6 h-6 bg-white text-black rounded-full flex items-center justify-center text-xs font-bold">
                            0
                        </div>
                        <span class="text-sm">0,00 EGP</span>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-6 space-x-reverse text-sm">
                    <button class="nav-item hover:text-yellow-400 transition-colors" onclick="show_sidebar(); show_cart_footer();">
                        <i class="fas fa-shopping-cart text-lg"></i>
                    </button>
                    <button class="nav-item hover:text-yellow-400 transition-colors">
                        <i class="far fa-heart text-lg"></i>
                    </button>
                    <button class="nav-item hover:text-yellow-400 transition-colors">
                        <i class="far fa-bell text-lg"></i>
                    </button>
                    <a href="/login" class="nav-item hover:text-yellow-400 transition-colors">
                        دخول / تسجيل
                    </a>
                    <button class="nav-item hover:text-yellow-400 transition-colors">
                        <i class="far fa-user text-lg"></i>
                    </button>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden text-white">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Logo and Search Section -->
    <div class="bg-black py-4">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between flex-col md:flex-row gap-4">
                <!-- Logo -->
                <a href="#" class="flex items-center space-x-3 space-x-reverse">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/055dd6fb-4963-40b9-bff0-d7c037d54d84.png" alt="شعار بيت جبر - شكل سداسي ذهبي مع رمز البرق الكهربائي في المنتصف" class="w-16 h-16 rounded-lg">
                    <span class="text-yellow-400 font-extrabold text-2xl arabic-text">
                        Bait 
                        <span class="text-white">gabr</span>
                    </span>
                </a>

                <!-- Search Form -->
                <form class="w-full md:w-1/2">
                    <div class="relative">
                        <input type="search" placeholder="البحث عن المنتجات" class="w-full rounded-full py-3 pr-5 pl-12 text-black text-sm focus:outline-none search-input">
                        <button type="submit" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-600">
                            <i class="fas fa-search text-lg"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Categories Navigation -->
    <nav class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex flex-wrap gap-3 justify-center">
                <button class="category-btn flex items-center gap-2 px-4 py-2 rounded-full bg-yellow-100 text-yellow-700 font-semibold text-sm">
                    <i class="fas fa-home"></i>
                    الرئيسية
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-700 font-semibold text-sm">
                    الإضاءة
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-700 font-semibold text-sm">
                    الحمام والمطبخ
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-700 font-semibold text-sm">
                    السباكة
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-700 font-semibold text-sm">
                    الأدوات الكهربائية
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-white py-16">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-6 arabic-text" id="page-title">
                أحدث المنتجات الكهربائية
            </h1>
            <p class="text-xl md:text-2xl opacity-90 mb-8">
                اكتشف مجموعة واسعة من المنتجات عالية الجودة بأسعار تنافسية
            </p>
            <button class="gold-gradient text-black px-8 py-3 rounded-full font-semibold text-lg hover:shadow-lg transition-shadow">
                ابدأ التسوق الآن
            </button>
        </div>
    </section>

    <!-- Breadcrumb -->
    <nav class="bg-gray-50 py-4">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center space-x-2 space-x-reverse text-sm text-gray-600">
                <a href="/" id="home-link" class="hover:text-yellow-600 transition-colors">الرئيسية</a>
                <span>/</span>
                <span class="font-semibold text-gray-800" id="section-link">الإلكترونيات</span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Products Grid -->
            <div class="flex-1">
                <!-- Filter Section -->
                <div class="mb-6">
                    <button class="border border-gray-300 rounded-lg px-6 py-3 text-gray-800 font-semibold flex items-center gap-2 hover:border-yellow-400 transition-colors">
                        التصنيف حسب الحدث
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>

                <!-- Products Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="product_list">
                    <!-- Products will be rendered here by JavaScript -->
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="w-full lg:w-80 bg-white rounded-xl shadow-lg p-6">
                <p class="text-gray-600 text-sm mb-6 text-right">
                    عرض 1-12 من 214 نتيجة
                </p>

                <!-- Price Filter -->
                <section class="mb-8">
                    <h2 class="font-bold text-lg text-gray-900 mb-4 text-right border-b pb-2">السعر</h2>
                    <div class="mb-4">
                        <input type="range" class="price-range w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <p class="text-gray-700 text-sm mb-4 text-right">
                        السعر: <span class="font-bold">EGP 140 — 30.500 EGP</span>
                    </p>
                    <button class="gold-gradient w-full py-2 rounded-lg font-semibold text-gray-900 hover:shadow-md transition-shadow">
                        ترشيح
                    </button>
                </section>

                <!-- Categories -->
                <section>
                    <h2 class="font-bold text-lg text-gray-900 mb-4 text-right border-b pb-2">الأقسام</h2>
                    
                    <div class="mb-4">
                        <button class="w-full flex items-center justify-between py-2 text-right font-semibold text-yellow-600">
                            <span>الحمام والمطبخ</span>
                            <i class="fas fa-chevron-up"></i>
                        </button>
                        <ul class="text-gray-600 text-sm space-y-2 mt-2 pr-4">
                            <li class="hover:text-yellow-600 cursor-pointer">• أحواض</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• اكسسوارات الحمام</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• البانيوهات</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• الدش</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• خلطات</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• مرحاض</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• وحدات</li>
                            <li class="hover:text-yellow-600 cursor-pointer">• السبакة</li>
                        </ul>
                    </div>

                    <div>
                        <button class="w-full flex items-center justify-between py-2 text-right font-semibold text-gray-900">
                            <span>أقسام أخرى</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </section>
            </aside>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white pt-12 pb-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                <div>
                    <h3 class="font-semibold text-lg mb-4">الإضاءة</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li class="hover:text-yellow-400 cursor-pointer">لمبات</li>
                        <li class="hover:text-yellow-400 cursor-pointer">إضاءة سقف وسبوتات</li>
                        <li class="hover:text-yellow-400 cursor-pointer">نجف</li>
                        <li class="hover:text-yellow-400 cursor-pointer">مصابيح طوارئ</li>
                        <li class="hover:text-yellow-400 cursor-pointer">إضاءة حائط</li>
                        <li class="hover:text-yellow-400 cursor-pointer">اكسسوارات الإضاءة</li>
                        <li class="hover:text-yellow-400 cursor-pointer">إضاءة خارجية</li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold text-lg mb-4">الحمام والمطبخ</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li class="hover:text-yellow-400 cursor-pointer">اكسسوارات الحمام</li>
                        <li class="hover:text-yellow-400 cursor-pointer">البانيوهات</li>
                        <li class="hover:text-yellow-400 cursor-pointer">خلطات</li>
                        <li class="hover:text-yellow-400 cursor-pointer">الدش</li>
                        <li class="hover:text-yellow-400 cursor-pointer">أحواض</li>
                        <li class="hover:text-yellow-400 cursor-pointer">مرحاض</li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold text-lg mb-4">خدمة العملاء</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li class="hover:text-yellow-400 cursor-pointer">مركز المساعدة</li>
                        <li class="hover:text-yellow-400 cursor-pointer">الشحن والتوصيل</li>
                        <li class="hover:text-yellow-400 cursor-pointer">الإرجاع والاستبدال</li>
                        <li class="hover:text-yellow-400 cursor-pointer">تتبع الطلب</li>
                        <li class="hover:text-yellow-400 cursor-pointer">الأسئلة الشائعة</li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold text-lg mb-4">عن المتجر</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li class="hover:text-yellow-400 cursor-pointer">من نحن</li>
                        <li class="hover:text-yellow-400 cursor-pointer">سياسة الخصوصية</li>
                        <li class="hover:text-yellow-400 cursor-pointer">شروط الاستخدام</li>
                        <li class="hover:text-yellow-400 cursor-pointer">سياسة الإرجاع</li>
                        <li class="hover:text-yellow-400 cursor-pointer">اتصل بنا</li>
                    </ul>
                </div>
            </div>

            <hr class="border-gray-700 my-8">

            <!-- Social Media and Contact -->
            <div class="flex flex-wrap justify-between items-center gap-6">
                <div class="flex flex-wrap gap-4">
                    <a href="#" class="social-icon w-12 h-12 border border-gray-600 rounded-lg flex items-center justify-center text-white hover:border-yellow-400">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                    <a href="#" class="social-icon w-12 h-12 border border-gray-600 rounded-lg flex items-center justify-center text-white hover:border-yellow-400">
                        <i class="fab fa-facebook-f text-xl"></i>
                    </a>
                    <a href="#" class="social-icon w-12 h-12 border border-gray-600 rounded-lg flex items-center justify-center text-white hover:border-yellow-400">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </a>
                    <a href="tel:01228642140" class="social-icon px-4 py-3 border border-gray-600 rounded-lg flex items-center gap-2 text-white hover:border-yellow-400">
                        <i class="fas fa-phone"></i>
                        01228642140
                    </a>
                    <a href="mailto:gabrgroup1@gmail.com" class="social-icon px-4 py-3 border border-gray-600 rounded-lg flex items-center gap-2 text-white hover:border-yellow-400">
                        <i class="far fa-envelope"></i>
                        gabrgroup1@gmail.com
                    </a>
                </div>
            </div>

            <hr class="border-gray-700 my-6">

            <!-- Bottom Links -->
            <div class="flex flex-wrap justify-start gap-6 text-sm text-gray-400">
                <a href="#" class="hover:text-yellow-400 transition-colors">من نحن</a>
                <a href="#" class="hover:text-yellow-400 transition-colors">اتصل بنا</a>
                <a href="#" class="hover:text-yellow-400 transition-colors">سياسة الخصوصية</a>
                <a href="#" class="hover:text-yellow-400 transition-colors">سياسة الإرجاع والاسترداد</a>
            </div>

            <p class="text-sm text-gray-400 mt-6">
                © 2024 جميع الحقوق محفوظة لـ Bait Gabr
            </p>
        </div>
    </footer>

    <!-- Shopping Cart Sidebar -->
    <div class="overlay" id="overlay"></div>
    <aside class="fixed top-0 right-0 h-full w-80 bg-white/95 backdrop-blur-sm z-50 flex flex-col" id="sidebar" style="display: none;">
        <header class="flex items-center justify-between p-6 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900">عربة التسوق</h2>
            <button id="close-btn" class="text-gray-600 hover:text-gray-900 transition-colors">
                <i class="fas fa-times text-lg"></i>
            </button>
        </header>

        <div class="flex-1 p-6 overflow-y-auto" id="cart-items">
            <div id="cart-footer" class="space-y-4">
                <p class="text-gray-500 text-center py-8">عربة التسوق فارغة</p>
            </div>
        </div>

        <footer class="p-6 border-t border-gray-200">
            <div class="flex justify-between items-center mb-4">
                <span class="font-semibold text-gray-900">المجموع الكلي:</span>
                <span id="total-price" class="font-bold text-yellow-600 text-lg">0,00 EGP</span>
            </div>
            <button class="gold-gradient w-full py-3 rounded-lg font-semibold text-gray-900 hover:shadow-md transition-shadow mb-3">
                مشاهدة محتوى العربة
            </button>
            <button class="bg-gray-900 w-full py-3 rounded-lg font-semibold text-white hover:bg-gray-800 transition-colors">
                اتمام الطلب
            </button>
        </footer>
    </aside>

     <script>
        // Get the current URL and extract the API parameter
        const url = new URL(window.location.href);
        const apis = url.searchParams.get('a') || 'err';
        console.log(apis);

        // Function to fetch all products
        async function read_all_products() {
            const api_url = url.origin;
            try {
                const response = await fetch(api_url + "/all_products", {
                    method: "GET",
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching products:', error);
                window.location.href = api_url;
                return [];
            }
        }

        // Function to render products
        async function renderproducts() {
            const apis = Number(url.searchParams.get('a') || 3323222);
            const api_url = url.origin;
            const products = await read_all_products();
            
            const productList = document.getElementById('product_list');
            productList.innerHTML = '';

            for (const product of products) {
                if (product.sections_code == apis && product.products_Status == 'Active') {
                    document.getElementById('page-title').innerHTML = product.sections_name;
                    document.getElementById('section-link').innerHTML = product.sections_name;
                    document.getElementById('home-link').href = api_url;

                    productList.innerHTML += `
                        <div class="bg-white rounded-lg border border-gray-200 p-3 relative flex flex-col" style="min-width: 280px;max-height: 400px;">
                            <button aria-label="Add to favorites" class="absolute top-3 right-3 bg-white rounded-md p-2 text-gray-800 hover:text-red-600">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="relative rounded-lg overflow-hidden">
                                <img alt="${product.description}" class="w-full h-auto object-cover rounded-lg" style="width:300px; height:200px;" loading="lazy" src="${product.image_url}" width="300"/>
                                <div aria-hidden="true" class="absolute bottom-3 left-3 bg-black bg-opacity-70 rounded-md p-1 text-yellow-400 text-lg">
                                    <i class="fas fa-adjust"></i>
                                </div>
                            </div>
                            <h3 class="mt-3 font-bold text-sm leading-tight text-gray-900">${product.name_product}</h3>
                            <div class="mt-1 flex space-x-1 justify-start rtl:space-x-reverse text-yellow-400 text-lg">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <p class="mt-2 font-semibold text-base text-gray-900">
                                EGP ${product.price} 
                                <span class="text-gray-500 mx-1">-</span>
                                <span class="text-gray-500">
                                    <i class="fas fa-tag"></i>
                                    <span class="text-lg text-red-600 font-semibold line-through">
                                        ${Math.floor(Number(product.price) + Number(10/100*product.price))} EGP
                                    </span>
                                </span>
                            </p>
                            <button class="mt-3 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-semibold rounded-md py-2 flex items-center justify-center gap-2" type="button" onclick="posh_order(${product.products_code},${product.price})">
                                اضافه الي العربه
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                            <button class="mt-3 bg-yellow-300 hover:bg-yellow-500 text-gray-900 font-semibold rounded-md py-2 flex items-center justify-center gap-2" type="button">
                                <a href="${api_url}/item-profile?product=${product.products_code}" class="text-blue-500 hover:underline">عرض التفاصيل</a>
                                <i class="fas fa-info-circle"></i>
                            </button>
                        </div>
                    `;
                }
            }
        }

        // Shopping Cart Functionality
        let cartItems = [];
        let totalPrice = 0;

        function updateCart() {
            const cartContainer = document.getElementById('cart-footer');
            const totalElement = document.getElementById('total-price');
            
            if (cartItems.length === 0) {
                cartContainer.innerHTML = '<p class="text-gray-500 text-center py-8">عربة التسوق فارغة</p>';
                totalElement.textContent = '0,00 EGP';
                return;
            }

            cartContainer.innerHTML = cartItems.map(item => `
                <div class="cart-item bg-gray-50 rounded-lg p-4 flex items-center gap-4">
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                    <div class="flex-1">
                        <h4 class="font-semibold text-sm">${item.name}</h4>
                        <p class="text-yellow-600 font-bold">${item.price} EGP</p>
                        <div class="flex items-center gap-2 mt-2">
                            <button class="text-gray-600 hover:text-red-600" onclick="updateQuantity(${item.id}, -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="font-semibold">${item.quantity}</span>
                            <button class="text-gray-600 hover:text-green-600" onclick="updateQuantity(${item.id}, 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <button class="text-red-600 hover:text-red-800" onclick="removeFromCart(${item.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');

            totalElement.textContent = `${totalPrice.toFixed(2)} EGP`;
        }

        function addToCart(product) {
            const existingItem = cartItems.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cartItems.push({
                    ...product,
                    quantity: 1
                });
            }
            
            totalPrice += product.price;
            updateCart();
        }

        function removeFromCart(id) {
            const itemIndex = cartItems.findIndex(item => item.id === id);
            if (itemIndex > -1) {
                const item = cartItems[itemIndex];
                totalPrice -= item.price * item.quantity;
                cartItems.splice(itemIndex, 1);
                updateCart();
            }
        }

        function updateQuantity(id, change) {
            const item = cartItems.find(item => item.id === id);
            if (item) {
                item.quantity += change;
                totalPrice += change * item.price;
                
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    updateCart();
                }
            }
        }

        // Sidebar functions
        function show_sidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.style.display = 'flex';
            overlay.style.display = 'block';
        }

        function show_cart_footer() {
            updateCart();
        }

        // Add to cart function
        function posh_order(id_prodect, price) {
            const api_url = url.origin;
            
            if (!localStorage.getItem('user_id') || 
                localStorage.getItem('user_id') === 'null' || 
                localStorage.getItem('user_id') === '' || 
                localStorage.getItem('user_id') === 'undefined' || 
                localStorage.getItem('user_id') === undefined) {
                window.location.href = api_url + '/login';
                return;
            }
            
            if (!localStorage.getItem('data_orders')) {
                localStorage.setItem('data_orders', JSON.stringify([]));
            }
            
            const existingOrders = JSON.parse(localStorage.getItem('data_orders'));
            const orderData = {
                product_id: id_prodect,
                price: price,
                quantity: 1
            };
            
            existingOrders.push(orderData);
            localStorage.setItem('data_orders', JSON.stringify(existingOrders));
            
            // Show success message
            alert('تمت إضافة المنتج إلى العربة بنجاح!');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const closeButton = document.getElementById('close-btn');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            closeButton.addEventListener('click', function() {
                sidebar.style.display = 'none';
                overlay.style.display = 'none';
            });
            
            overlay.addEventListener('click', function() {
                sidebar.style.display = 'none';
                overlay.style.display = 'none';
            });
            
            // Render products on page load
            renderproducts();
        });

        // Sample products for demonstration
        const sampleProducts = [
            {
                id: 1,
                name: "جسم خلاط بانيه",
                price: 5550,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d6af1a3d-e968-40c9-a76b-6ced00576778.png"
            },
            {
                id: 2,
                name: "ايبليك هاير جلدي",
                price: 1250,
                image: "https://placehold.co/100x100"
            },
            {
                id: 3,
                name: "لمبة LED إضاءة ذكية",
                price: 350,
                image: "https://placehold.co/100x100"
            }
        ];
    </script> 
    <!-- <script src="../js/item.js"></script> -->
</body>
</html>
