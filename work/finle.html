<html dir="rtl" lang="ar">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Cart Page with Quantity Update
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Almarai&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Almarai', sans-serif;
    }
  </style>
 </head>
 <body class="bg-[#f8f7f2] p-4">
  <div class="max-w-7xl mx-auto space-y-6" id="cart-container">
   <div class="flex flex-col lg:flex-row gap-6">
    <!-- Right side: Products table -->
    <div class="flex-1 bg-white rounded-lg p-6 shadow-sm" id="products-section">
     <table class="w-full text-[13px] text-[#4a4a4a]" id="products-table">
      <thead>
       <tr class="border-b border-[#d9d9d9] text-[14px] font-semibold">
        <th class="pb-3 text-right">
         المنتج
        </th>
        <th class="pb-3 text-center">
         السعر
        </th>
        <th class="pb-3 text-center">
         الكمية
        </th>
        <th class="pb-3 text-center">
         المجموع
        </th>
        <th class="pb-3 w-6">
        </th>
       </tr>
      </thead>
      <tbody id="products-tbody">
       <tr data-id="1" class="border-b border-[#d9d9d9]">
        <td class="py-4 flex items-center gap-3">
         <img alt="صورة المنتج: كشاف ليد 24 وات سقف مشروم 3 تكتات سراج" class="w-[50px] h-[50px] object-cover rounded" height="50" src="https://storage.googleapis.com/a1aa/image/b8e8ff3a-ba2f-454b-a1ca-5dc310789e47.jpg" width="50"/>
         <div class="text-[12px] leading-tight">
          <div>
           كشاف ليد 24 وات سقف مشروم 3 تكتات سراج
          </div>
          <div class="text-[#7a7a7a] text-[10px] mt-1">
           البائع: Sirage
          </div>
         </div>
        </td>
        <td class="text-center text-[13px] text-[#4a4a4a] price-cell">
         395,00 EGP
        </td>
        <td class="text-center">
         <div class="inline-flex border border-[#d9d9d9] rounded text-[13px] text-[#4a4a4a]">
          <button aria-label="Decrease quantity" class="px-2 border-r border-[#d9d9d9] leading-none btn-decrease">
           -
          </button>
          <input class="w-8 text-center border-none focus:outline-none quantity-input" readonly="" type="text" value="1"/>
          <button aria-label="Increase quantity" class="px-2 border-l border-[#d9d9d9] leading-none btn-increase">
           +
          </button>
         </div>
        </td>
        <td class="text-center text-[13px] text-[#4a4a4a] total-cell">
         395,00 EGP
        </td>
        <td class="text-center text-[#4a4a4a] cursor-pointer text-lg font-semibold remove-product">
         ×
        </td>
       </tr>
       <tr data-id="2">
        <td class="py-4 flex items-center gap-3">
         <img alt="صورة المنتج: وتي ستوديو نيو بونيكا 1 فتحة ابيض , تشايندر اليكتريك" class="w-[50px] h-[50px] object-cover rounded" height="50" src="https://storage.googleapis.com/a1aa/image/53b0a964-fec2-4fd4-6a7a-2077dc163ad0.jpg" width="50"/>
         <div class="text-[12px] leading-tight">
          <div>
           وتي ستوديو نيو بونيكا 1 فتحة ابيض , تشايندر اليكتريك
          </div>
          <div class="text-[#7a7a7a] text-[10px] mt-1">
           البائع: Elecadi
          </div>
         </div>
        </td>
        <td class="text-center text-[13px] text-[#4a4a4a] price-cell">
         48,00 EGP
        </td>
        <td class="text-center">
         <div class="inline-flex border border-[#d9d9d9] rounded text-[13px] text-[#4a4a4a]">
          <button aria-label="Decrease quantity" class="px-2 border-r border-[#d9d9d9] leading-none btn-decrease">
           -
          </button>
          <input class="w-8 text-center border-none focus:outline-none quantity-input" readonly="" type="text" value="1"/>
          <button aria-label="Increase quantity" class="px-2 border-l border-[#d9d9d9] leading-none btn-increase">
           +
          </button>
         </div>
        </td>
        <td class="text-center text-[13px] text-[#4a4a4a] total-cell">
         48,00 EGP
        </td>
        <td class="text-center text-[#4a4a4a] cursor-pointer text-lg font-semibold remove-product">
         ×
        </td>
       </tr>
      </tbody>
     </table>
     <form aria-label="Apply coupon code" class="mt-6 flex flex-col sm:flex-row gap-3 justify-end items-center" dir="ltr">
      <input class="border border-[#d9d9d9] rounded px-3 py-2 text-[13px] w-full sm:w-48" placeholder="رمز القسيمة" type="text"/>
      <button class="bg-[#f5b300] text-white text-[13px] px-4 py-2 rounded whitespace-nowrap" type="submit">
       تطبيق القسيمة
      </button>
     </form>
    </div>
    <!-- Left side: Cart summary -->
    <div class="w-full max-w-sm bg-white rounded-lg p-6 shadow-sm text-[13px] text-[#4a4a4a]" id="cart-summary">
     <div class="font-semibold text-[14px] mb-3">
      مجموع السلة
     </div>
     <div class="mb-3" id="subtotal">
      443,00 EGP
     </div>
     <div class="mb-3">
      <div class="mb-1">
       الشحن
      </div>
      <form class="text-[11px] text-[#7a7a7a] space-y-1" id="shipping-form">
       <label class="flex items-center gap-2">
        <input checked="" class="text-[#f5b300]" name="shipping" type="radio" value="150"/>
        <span>
         شحن القاهرة:
         <span class="text-[#f5b300] font-semibold">
          150,00 EGP
         </span>
        </span>
       </label>
       <label class="flex items-center gap-2">
        <input class="text-[#f5b300]" name="shipping" type="radio" value="0"/>
        <span>
         استلم من الفرع (الإسكندرية)
        </span>
       </label>
       <label class="flex items-center gap-2">
        <input class="text-[#f5b300]" name="shipping" type="radio" value="0"/>
        <span>
         الشحن إلى القاهرة
        </span>
       </label>
       <button class="text-[#f5b300] text-[11px] mt-1 font-semibold" type="button">
        تغيير العنوان
       </button>
      </form>
     </div>
     <div class="font-semibold text-[14px] mb-3">
      المجموع
     </div>
     <div class="text-[#f5b300] font-semibold mb-4" id="total">
      593,00 EGP
     </div>
     <button class="w-full bg-[#f5b300] text-white text-[13px] py-2 rounded" type="button">
      المواصلة إلى إتمام الشراء
     </button>
    </div>
   </div>
   <!-- Bottom section -->
   <div class="flex flex-col md:flex-row gap-6 max-w-7xl mx-auto">
    <!-- Payment methods and info -->
    <div class="bg-white rounded-lg p-6 shadow-sm flex-1 text-[13px] text-[#4a4a4a]">
     <div class="font-semibold text-[14px] mb-4">
      وسائل الدفع
     </div>
     <div class="flex items-center gap-4 mb-4">
      <img alt="شعار فيزا" class="h-10 object-contain" height="40" src="https://storage.googleapis.com/a1aa/image/f2a7f5c4-f0d7-420f-6157-b6407a4b8af4.jpg" width="60"/>
      <img alt="شعار ماستركارد" class="h-10 object-contain" height="40" src="https://storage.googleapis.com/a1aa/image/6554b6af-96ae-41f9-8660-4bcc22aaca96.jpg" width="60"/>
     </div>
     <div class="mb-3">
      <div class="font-semibold mb-1">
       معلومات التوصيل:
      </div>
      <p class="text-[11px] text-[#7a7a7a] leading-relaxed">
       على الرغم من أننا لا نعتقد أنك ستحتاج إلى ذلك، إلا أننا سنكون سعداء
            بتقديم استرداد إذا تم طلبه خلال 14 يوماً من الشراء.
      </p>
     </div>
     <div>
      <div class="font-semibold text-[12px] mb-1">
       ضمان استرداد الأموال خلال 14 يوماً:
      </div>
      <p class="text-[11px] text-[#7a7a7a] leading-relaxed">
       على الرغم من أننا لا نعتقد أنك ستحتاج إلى ذلك، إلا أننا سنكون سعداء
            بتقديم استرداد إذا تم طلبه خلال 14 يوماً من الشراء.
      </p>
     </div>
    </div>
    <!-- Three info cards -->
    <div class="flex flex-1 gap-4 flex-col sm:flex-row">
     <div class="bg-white rounded-lg p-4 shadow-sm flex-1 text-center text-[13px] text-[#4a4a4a]">
      <div class="mb-2 text-[#f5b300] text-xl">
       <i class="fas fa-eye-slash">
       </i>
      </div>
      <div class="font-semibold mb-1">
       حماية الخصوصية
      </div>
      <div class="text-[11px] text-[#7a7a7a] leading-relaxed">
       خصوصيتك دائماً هي أولويتنا القصوى
      </div>
     </div>
     <div class="bg-white rounded-lg p-4 shadow-sm flex-1 text-center text-[13px] text-[#4a4a4a]">
      <div class="mb-2 text-[#f5b300] text-xl">
       <i class="fas fa-lock">
       </i>
      </div>
      <div class="font-semibold mb-1">
       تسوق آمن
      </div>
      <div class="text-[11px] text-[#7a7a7a] leading-relaxed">
       جميع المعاملات المالية محمية بشكل كامل
      </div>
     </div>
     <div class="bg-white rounded-lg p-4 shadow-sm flex-1 text-center text-[13px] text-[#4a4a4a]">
      <div class="mb-2 text-[#f5b300] text-xl">
       <i class="fas fa-phone">
       </i>
      </div>
      <div class="font-semibold mb-1">
       لديك اسئلة؟
      </div>
      <div class="text-[11px] text-[#7a7a7a] leading-relaxed">
       نحن هنا لمساعدتك في أي وقت
       <a class="text-[#f5b300] font-semibold" href="tel:">
        اتصل بنا
       </a>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
   // Function to parse price string like "395,00 EGP" to number 395.00
    function parsePrice(priceStr) {
      return Number(priceStr.replace(/[^\d,]/g, '').replace(',', '.'));
    }

    // Function to format number to price string like "395,00 EGP"
    function formatPrice(num) {
      return num.toFixed(2).replace('.', ',') + ' EGP';
    }

    function updateSummary() {
      const tbody = document.getElementById('products-tbody');
      let subtotal = 0;
      tbody.querySelectorAll('tr').forEach(tr => {
        const totalCell = tr.querySelector('.total-cell');
        if (totalCell) {
          subtotal += parsePrice(totalCell.textContent.trim());
        }
      });

      // Update subtotal display
      document.getElementById('subtotal').textContent = formatPrice(subtotal);

      // Get shipping cost from selected radio
      const shippingRadios = document.querySelectorAll('input[name="shipping"]');
      let shippingCost = 0;
      shippingRadios.forEach(radio => {
        if (radio.checked) {
          shippingCost = Number(radio.value);
        }
      });

      // Update total display
      const total = subtotal + shippingCost;
      document.getElementById('total').textContent = formatPrice(total);
    }

    // Attach event listeners to remove buttons
    function attachRemoveListeners() {
      const removeButtons = document.querySelectorAll('.remove-product');
      removeButtons.forEach(button => {
        button.addEventListener('click', function() {
          const row = this.closest('tr');
          if (row) {
            row.remove();
            updateSummary();
          }
        });
      });
    }

    // Attach event listeners to quantity buttons
    function attachQuantityListeners() {
      const tbody = document.getElementById('products-tbody');
      tbody.querySelectorAll('tr').forEach(tr => {
        const btnDecrease = tr.querySelector('.btn-decrease');
        const btnIncrease = tr.querySelector('.btn-increase');
        const quantityInput = tr.querySelector('.quantity-input');
        const priceCell = tr.querySelector('.price-cell');
        const totalCell = tr.querySelector('.total-cell');

        if (btnDecrease && btnIncrease && quantityInput && priceCell && totalCell) {
          const unitPrice = parsePrice(priceCell.textContent.trim());

          btnDecrease.addEventListener('click', () => {
            let qty = parseInt(quantityInput.value);
            if (qty > 1) {
              qty--;
              quantityInput.value = qty;
              totalCell.textContent = formatPrice(qty * unitPrice);
              updateSummary();
            }
          });

          btnIncrease.addEventListener('click', () => {
            let qty = parseInt(quantityInput.value);
            qty++;
            quantityInput.value = qty;
            totalCell.textContent = formatPrice(qty * unitPrice);
            updateSummary();
          });
        }
      });
    }

    // Attach event listeners to shipping radios to update total on change
    function attachShippingListeners() {
      const shippingRadios = document.querySelectorAll('input[name="shipping"]');
      shippingRadios.forEach(radio => {
        radio.addEventListener('change', () => {
          updateSummary();
        });
      });
    }

    // Initial setup
    document.addEventListener('DOMContentLoaded', () => {
      attachRemoveListeners();
      attachQuantityListeners();
      attachShippingListeners();
      updateSummary();
    });
  </script>
 </body>
</html>