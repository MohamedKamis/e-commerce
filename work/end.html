<html dir="rtl" lang="ar">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Order Page with Quantity Update and Remove Product
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   /* Custom scrollbar for textarea */
  textarea::-webkit-scrollbar {
    width: 6px;
  }
  textarea::-webkit-scrollbar-thumb {
    background-color: #d1d5db;
    border-radius: 3px;
  }
  </style>
 </head>
 <body class="bg-[#fefcf5] font-sans text-[13px] text-[#222222]">
  <div class="max-w-6xl mx-auto p-4">
   <div class="bg-white rounded-md py-1 px-3 mb-6 text-center text-[11px] text-[#222222]">
    هل تملك حساب مسبقا؟
    <a class="text-[#d6b14a] font-semibold hover:underline" href="#">
     اضغط هنا لتسجيل دخولك
    </a>
   </div>
   <div class="flex flex-col md:flex-row gap-6">
    <!-- Left side: Order summary -->
    <section aria-label="طلبك" class="bg-white rounded-md p-4 flex-1 max-w-md md:max-w-none">
     <div class="flex justify-between items-center mb-3">
      <h2 class="font-semibold text-[14px] text-[#222222]">
       طلبك
      </h2>
      <span class="bg-[#f28a2e] text-white text-[11px] font-semibold rounded-full w-5 h-5 flex items-center justify-center" id="order-count">
       2
      </span>
     </div>
     <div class="space-y-4" id="products-list">
      <!-- Product 1 -->
      <div class="flex items-center gap-3 product-item" id="product1">
       <img alt="صورة منتج كشكش ايد 3 وات سلف مشموم 3 دقات سراج" class="w-12 h-12 object-cover rounded" height="50" src="https://storage.googleapis.com/a1aa/image/d5534831-406f-4bf9-48ca-7580e44e0d91.jpg" width="50"/>
       <div class="flex-1 text-[11px] text-[#222222]" id="product1-info">
        <p class="leading-tight">
         كشكش ايد 3 وات سلف مشموم 3 دقات سراج
        </p>
        <p class="text-[10px] text-[#999999]" id="product1-price" data-price="395.00">
         395,00 EGP
        </p>
        <div class="flex items-center gap-1 mt-1 w-max">
         <button aria-label="نقص كمية المنتج" class="border border-[#999999] text-[#999999] w-5 h-5 flex items-center justify-center rounded" id="product1-minus">
          -
         </button>
         <input class="w-6 text-center text-[11px] border border-[#999999] rounded" id="product1-qty" readonly="" type="text" value="1"/>
         <button aria-label="زيادة كمية المنتج" class="border border-[#999999] text-[#999999] w-5 h-5 flex items-center justify-center rounded" id="product1-plus">
          +
         </button>
        </div>
       </div>
       <button aria-label="حذف المنتج" class="text-[#999999] hover:text-[#222222] text-[14px] remove-product" data-product-id="product1">
        ×
       </button>
      </div>
      <!-- Product 2 -->
      <div class="flex items-center gap-3 opacity-50 pointer-events-none product-item" id="product2">
       <img alt="صورة منتج ون ستوب يو يوغا 2 أمتعة بيش، ستايلر الكترونيك" class="w-12 h-12 object-cover rounded" height="50" src="https://storage.googleapis.com/a1aa/image/1a4d8e57-ae03-41e2-1920-43ea4be4c0a7.jpg" width="50"/>
       <div class="flex-1 text-[11px] text-[#222222]">
        <p class="leading-tight">
         ون ستوب يو يوغا 2 أمتعة بيش، ستايلر الكترونيك
        </p>
        <p class="text-[10px] text-[#999999]">
         48,00 EGP
        </p>
        <div class="flex items-center gap-1 mt-1 w-max">
         <button aria-label="نقص كمية المنتج" class="border border-[#999999] text-[#999999] w-5 h-5 flex items-center justify-center rounded" disabled="">
          -
         </button>
         <input class="w-6 text-center text-[11px] border border-[#999999] rounded bg-[#f9fafb]" readonly="" type="text" value="1"/>
         <button aria-label="زيادة كمية المنتج" class="border border-[#999999] text-[#999999] w-5 h-5 flex items-center justify-center rounded" disabled="">
          +
         </button>
        </div>
       </div>
       <button aria-label="حذف المنتج" class="text-[#999999] text-[14px]" disabled="">
        ×
       </button>
      </div>
     </div>
     <div class="mt-4 text-[11px]">
      <div class="flex justify-between mb-1">
       <span class="font-semibold">
        المجموع
       </span>
       <span id="subtotal">
        443,00 EGP
       </span>
      </div>
      <div class="mb-1">
       <span class="font-semibold">
        الشحن
       </span>
       <div class="text-[10px] mt-1">
        <label class="flex items-center gap-2 cursor-pointer">
         <input checked="" class="cursor-pointer" name="shipping" type="radio" value="sh-cairo"/>
         <span>
          شحن القاهرة: 50,00 EGP
         </span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer mt-1">
         <input class="cursor-pointer" name="shipping" type="radio" value="pickup"/>
         <span>
          استلام من الفرع (الكيت كات)
         </span>
        </label>
       </div>
      </div>
      <div class="flex justify-between font-semibold text-[13px] mb-3" id="total-container">
       <span>
        المجموع
       </span>
       <span id="total">
        593,00 EGP
       </span>
      </div>
      <textarea class="w-full resize-none rounded border border-[#d1d5db] p-2 text-[11px] text-[#222222] placeholder-[#999999]" placeholder="من المتوقع أن يصل طلبك مستودعنا خلال 6-7 أيام" rows="3"></textarea>
     </div>
     <div class="mt-4">
      <h3 class="font-semibold text-[14px] mb-3">
       معلومات الدفع
      </h3>
      <form class="text-[11px] space-y-3">
       <label class="flex items-center gap-2 cursor-pointer">
        <input checked="" name="payment" type="radio" value="card"/>
        <i class="far fa-credit-card text-[16px]">
        </i>
        <span>
         Debit/Credit Card
        </span>
        <span class="ml-auto text-[10px] text-[#999999]">
         Secure Payment via Paymob Checkout
        </span>
       </label>
       <label class="flex items-center gap-2 cursor-pointer">
        <input name="payment" type="radio" value="valU"/>
        <span>
         ValU
        </span>
       </label>
       <label class="flex items-center gap-2 cursor-pointer">
        <input name="payment" type="radio" value="souhoola"/>
        <span>
         Souhoola
        </span>
       </label>
       <label class="flex items-center gap-2 cursor-pointer">
        <input name="payment" type="radio" value="contact"/>
        <span>
         Contact
        </span>
       </label>
       <label class="flex items-center gap-2 cursor-pointer">
        <input name="cod" type="checkbox" value="cod"/>
        <span>
         الدفع عند الاستلام (نقدا أو فيزا)
        </span>
       </label>
      </form>
      <p class="text-[9px] text-[#999999] mt-3 leading-tight">
       *ستستخدم بطاقتك الشخصية لحماية عملية طلبك، ودعم تجربتك طوال استخدامك
            للموقع وللإعلانات أخرى موصومة في
       <a class="text-[#999999] underline" href="#">
        سياسة الخصوصية
       </a>
      </p>
      <button class="mt-4 w-full bg-[#fbbf24] text-[#222222] font-semibold text-[13px] py-2 rounded" type="submit">
       إتمام الطلب
      </button>
     </div>
    </section>
    <!-- Right side: Invoice data -->
    <section aria-label="بيانات الفاتورة" class="bg-white rounded-md p-4 flex-1 max-w-md md:max-w-none">
     <div class="flex justify-between items-center mb-3">
      <h2 class="font-semibold text-[14px] text-[#222222]">
       بيانات الفاتورة
      </h2>
      <span class="bg-[#f28a2e] text-white text-[11px] font-semibold rounded-full w-5 h-5 flex items-center justify-center">
       1
      </span>
     </div>
     <form class="space-y-3 text-[11px] text-[#222222]">
      <div class="flex gap-3">
       <div class="flex-1">
        <label class="block mb-1" for="firstName">
         الاسم الأول *
        </label>
        <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="firstName" type="text"/>
       </div>
       <div class="flex-1">
        <label class="block mb-1" for="lastName">
         الاسم الأخير *
        </label>
        <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="lastName" type="text"/>
       </div>
      </div>
      <div>
       <label class="block mb-1" for="country">
        الدولة / المنطقة *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="country" type="text" value="مصر"/>
      </div>
      <div>
       <label class="block mb-1" for="streetAddress">
        عنوان الشارع *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="streetAddress" placeholder="رقم المنزل، اسم الشارع، الحي ..." type="text"/>
      </div>
      <div>
       <label class="block mb-1" for="addressNote">
        اسم العنوان الإضافي
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="addressNote" placeholder="الشقة، الطابق، الوحدة (اختياري)" type="text"/>
      </div>
      <div>
       <label class="block mb-1" for="city">
        المدينة *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="city" type="text"/>
      </div>
      <div>
       <label class="block mb-1" for="state">
        الولاية / المنطقة *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="state" type="text" value="القاهرة"/>
      </div>
      <div>
       <label class="block mb-1" for="phone">
        الهاتف *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="phone" type="tel"/>
      </div>
      <div>
       <label class="block mb-1" for="email">
        البريد الإلكتروني *
       </label>
       <input class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px]" id="email" type="email"/>
      </div>
      <div class="flex items-center gap-2">
       <input id="shipDifferent" type="checkbox"/>
       <label class="text-[11px]" for="shipDifferent">
        الشحن إلى عنوان مختلف؟
       </label>
      </div>
      <div>
       <label class="block mb-1" for="orderNotes">
        ملاحظات الطلب (اختياري)
       </label>
       <textarea class="w-full border border-[#d1d5db] rounded px-2 py-1 text-[11px] resize-none" id="orderNotes" placeholder="ملاحظات حول الطلب، مثل معلومات عن التسليم" rows="5"></textarea>
      </div>
     </form>
    </section>
   </div>
  </div>
  <script>
   // Prices and quantities
   const product1Price = 395.00;
   const product2Price = 48.00;
   const shippingCost = 50.00;

   // Elements
   const qtyInput = document.getElementById('product1-qty');
   const minusBtn = document.getElementById('product1-minus');
   const plusBtn = document.getElementById('product1-plus');
   const subtotalEl = document.getElementById('subtotal');
   const totalEl = document.getElementById('total');
   const productsList = document.getElementById('products-list');
   const orderCountEl = document.getElementById('order-count');

   // Initial quantities
   let qty1 = parseInt(qtyInput.value);

   function updateTotals() {
     // Check if product1 exists
     const product1Exists = document.getElementById('product1') !== null;

     // Calculate subtotal for product 1 if exists
     const product1Total = product1Exists ? qty1 * product1Price : 0;

     // Product 2 is fixed 1 qty * 48.00 (disabled)
     const product2Exists = document.getElementById('product2') !== null;
     const product2Total = product2Exists ? product2Price : 0;

     // Subtotal = product1Total + product2Total
     const subtotal = product1Total + product2Total;

     // Total = subtotal + shippingCost
     const total = subtotal + shippingCost;

     // Update subtotal and total text with comma as decimal separator and 2 decimals
     subtotalEl.textContent = subtotal.toFixed(2).replace('.', ',') + ' EGP';
     totalEl.textContent = total.toFixed(2).replace('.', ',') + ' EGP';

     // Update order count badge
     let count = 0;
     if(product1Exists) count++;
     if(product2Exists) count++;
     orderCountEl.textContent = count;
   }

   minusBtn.addEventListener('click', () => {
     if (qty1 > 1) {
       qty1--;
       qtyInput.value = qty1;
       updateTotals();
     }
   });

   plusBtn.addEventListener('click', () => {
     qty1++;
     qtyInput.value = qty1;
     updateTotals();
   });

   // Remove product button
   productsList.addEventListener('click', (e) => {
     if(e.target.classList.contains('remove-product')) {
       const productId = e.target.getAttribute('data-product-id');
       const productElem = document.getElementById(productId);
       if(productElem) {
         productElem.remove();
         // If removed product is product1, reset qty1 to 0
         if(productId === 'product1') {
           qty1 = 0;
         }
         updateTotals();
       }
     }
   });

   // Initialize totals on page load
   updateTotals();
  </script>
 </body>
</html>